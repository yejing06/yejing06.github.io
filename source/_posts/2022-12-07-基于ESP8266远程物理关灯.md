---
title: åŸºäºESP8266è¿œç¨‹ç‰©ç†å…³ç¯
tags:
  - ESP8266
  - è¿œç¨‹ç‰©ç†å…³ç¯
keywords:
  - ESP8266
  - è¿œç¨‹ç‰©ç†å…³ç¯
categories: æ‚è°ˆæ•™ç¨‹
swiper_index: 2
abbrlink: f903bb43
date: 2022-12-07 09:25:02
description: åŸºäºESP8266è¿œç¨‹ç‰©ç†å…³ç¯
---
# 1ã€ä»‹ç»
&emsp;&emsp;1ã€æ”¯æŒæ‰‹æœºappè¿œç¨‹æ§åˆ¶
&emsp;&emsp;2ã€æ”¯æŒå°çˆ±è¯­éŸ³æ§åˆ¶
# 2ã€æˆå“å±•ç¤º
&emsp;&emsp;è¯ä¸å¤šè¯´ï¼Œå…ˆçœ‹æ•ˆæœ
{% folding blue,  ç‚¹å‡»æŸ¥çœ‹appç•Œé¢ %}
![](https://nkt-blog-1315787778.cos.ap-nanjing.myqcloud.com/blog/article/202212101419871.webp)
{% endfolding %} {% folding blue,  ç‚¹å‡»æŸ¥çœ‹æˆå“æ•ˆæœ %}
![](https://nkt-blog-1315787778.cos.ap-nanjing.myqcloud.com/blog/article/202212111625124.gif)
{% endfolding %}
<p style="font-size:25px;">{% span red, æ•™ç¨‹å¼€å§‹ğŸ‘» %}</p>

# 3ã€ææ–™æ¸…å•
1ã€SG90æˆ–MG9Sèˆµæœºä¸€ä¸ªï¼ˆå¤§æ¦‚5-12å…ƒï¼‰
2ã€ESP8266ä¸²å£wifi æ— çº¿æ¨¡å— ESP-01ã€ESP-01Så‡å¯ï¼ˆ5å…ƒå·¦å³ï¼‰
3ã€çƒ§å½•ä¸‹è½½å™¨ï¼ˆå¤§æ¦‚8-10å…ƒï¼‰
4ã€æœé‚¦çº¿ `æ³¨æ„ï¼šéœ€è¦ç”¨çš„æ˜¯å…¬å¯¹æ¯`(4å…ƒå·¦å³)
5ã€æ•°æ®çº¿ ç”¨æ‰‹æœºçš„å³å¯
6ã€ç”µæºæ¨¡å—å¯è‡ªè¡Œé€‚é…
7ã€æ— ç—•èƒ¶ï¼ˆå¯é€‰ï¼‰
æ–¹æ¡ˆå¯é€‰ï¼š
{% tabs 1%}
<!-- tab ç›´æ’æ–¹æ¡ˆ-->
ç›´æ¥æ’åœ¨ä¸€ä¸ªå……ç”µå™¨æ’å¤´(æ¯”å¦‚æ‰‹æœºå……ç”µå™¨)ä¸Šï¼Œç„¶åæ’æ’åº§
<!-- endtab -->
<!-- tab å……ç”µå®æ–¹æ¡ˆ -->
ç›´æ¥æ’åœ¨å……ç”µå®ä¸Š`æ³¨æ„ï¼šéƒ¨åˆ†å……ç”µå®æ— ç”µæºè¾“å‡ºå¯èƒ½ä¼šè‡ªåŠ¨å…³é—­ä¾›ç”µ`
<!-- endtab -->
<!-- tab åŠ ç”µæºæ¨¡å— -->
å¯ç”¨å……ç”µç”µæ± åŠ ç”µæºæ¨¡å—ï¼Œæ¯”è¾ƒéº»çƒ¦
<!-- endtab -->
{% endtabs %}

# 4ã€æˆ‘çš„æ–¹æ¡ˆ
1ã€SG90 (åæ‚”äº†ï¼Œä¸€å®šè¦ä¹°ä¸€ä¸ªå¥½ä¸€ç‚¹çš„èˆµæœºï¼Œå¯èƒ½æ˜¯æˆ‘çš„å¼€å…³åŠ›åº¦æ¯”è¾ƒå¤§ï¼Œæ—¶ä¸æ—¶ä¼šå‡ºç°èˆµæœºè½¬ä¸åŠ¨çš„æƒ…å†µï¼)
2ã€ESP8266ä¸²å£wifi æ— çº¿æ¨¡å— ESP-01Så®‰ä¿¡å¯
3ã€çƒ§å½•ä¸‹è½½å™¨ è¿™æ²¡ä»€ä¹ˆå¥½è¯´çš„
4ã€æœé‚¦çº¿ å…¬å¯¹æ¯
5ã€æ‰‹æœºæ•°æ®çº¿
6ã€ç”µæºæ¨¡å—æˆ‘é‡‡ç”¨çš„æ˜¯ç›´æ¥ç”¨æ’å¤´æ’æ’åº§
7ã€æ— ç—•èƒ¶

# 5ã€è½¯ä»¶å®‰è£…é…ç½®
## 5.1 ä¸‹è½½é…ç½®Arduino IDE
[ä¸‹è½½åœ°å€](https://www.arduino.cc/en/software)
![](https://nkt-blog-1315787778.cos.ap-nanjing.myqcloud.com/blog/article/202212101507726.gif)
&emsp;&emsp;é€‰æ‹©é€‚åˆè‡ªå·±çš„ç‰ˆæœ¬ä¸‹è½½å³å¯
## 5.2 é…ç½®ESP8266å¼€å‘ç¯å¢ƒ 
### 5.2.1 å®‰è£…ä¸²å£é©±åŠ¨
&emsp;&emsp;ESP8266ä¸²å£é©±åŠ¨å¤§å¤šæ˜¯`CH340`ã€`CP2102`æˆ–`CH9102`,å…·ä½“å¯åœ¨è®¡ç®—æœºç®¡ç†ç•Œé¢æŸ¥çœ‹ç«¯å£å¤„æˆ–ç›´æ¥çœ‹èŠ¯ç‰‡ï¼Œå½“ç„¶ï¼Œç›´æ¥é—®åº—å®¶ä¹Ÿè¡Œï¼
CHç³»åˆ—[é©±åŠ¨ä¸‹è½½å®˜ç½‘](http://www.wch.cn),æœç´¢å…·ä½“å‹å·ä¹‹ååœ¨`é©±åŠ¨ä¸å·¥å…·`å¤„ä¸‹è½½,å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è½½æˆ‘çš„ã€‚`CH340å¯†ç :8oto`  `CH9102å¯†ç :3ty4`

<style>
.box1 {
    display: flex;;
    gap: 15px;
    flex-wrap: wrap;
    justify-content: center;
}
</style>

<div class="box1">
{% btns rounded grid5 %}
{% cell CH340é©±åŠ¨,https://wwzq.lanzoue.com/iTnr80i2w6dc, fas fa-download %}
{% endbtns %}
{% btns rounded grid5 %}
{% cell CH9102é©±åŠ¨,https://wwzq.lanzoue.com/ivcA30i0shmb, fas fa-download %}
{% endbtns %}
</div>
CPç³»åˆ—[é©±åŠ¨ä¸‹è½½å®˜ç½‘](https://www.silabs.com),å› ä¸ºæˆ‘æ˜¯CH9102ï¼Œæ‰€ä»¥æˆ‘å°±æ²¡æœ‰å¼„è¿™ä¸ªï¼Œå¯è‡ªè¡Œä¸‹è½½ã€‚
ç«¯å£é€‰æ‹©`COM3`æˆ–è€…`COM5`(åè¾¹è¿æ¥åå†pé€‰æ‹©),å…·ä½“ç«¯å£å·å¯åœ¨è®¡ç®—æœºç®¡ç†ç•Œé¢æŸ¥çœ‹ç«¯å£ã€‚

### 5.2.2 å®‰è£…ESP8266åº“
&emsp;&emsp;ESP8266åº“çš„å®‰è£…æ–¹å¼æœ‰ä¸¤ç§ï¼Œç¬¬ä¸€ç§æ˜¯`æœåŠ¡å™¨ä¸‹è½½`,å› å…¶æœåŠ¡iå…¶åœ¨å›½å¤–ï¼Œå¸¸è§„æ‰‹æ®µä¸‹è½½è¶…æ…¢ï¼›ç¬¬äºŒç§æ–¹å¼æ—¶å®‰è£…åŒ…ä¸‹è½½ã€‚`æ¨èä½¿ç”¨å®‰è£…åŒ…æ–¹å¼`
{% tabs 1%}
<!-- tab æœåŠ¡å™¨ä¸‹è½½-->
**æœåŠ¡å™¨æ–¹å¼ä¸‹è½½**
&emsp;&emsp;æ‰“å¼€Arduinoè½¯ä»¶ï¼Œè¿›å…¥é¦–é€‰é¡¹ï¼ˆPreferencesï¼‰ï¼Œæ‰¾åˆ°å…¶ä»–å¼€å‘æ¿ç®¡ç†å™¨åœ°å€ï¼ˆAdditional Board Manager URLsï¼‰ï¼Œæ·»åŠ  `http://arduino.esp8266.com/stable/package_esp8266com_index.json`ï¼Œç‚¹å‡»ç¡®å®šï¼ˆOKï¼‰ã€‚
![](https://nkt-blog-1315787778.cos.ap-nanjing.myqcloud.com/blog/article/202212101612403.webp)

&emsp;&emsp;ç‚¹å‡»å·¥å…·-å¼€å‘æ¿-å¼€å‘æ¿ç®¡ç†å™¨ï¼Œè¿›å…¥å¼€å‘æ¿ç®¡ç†å™¨ç•Œé¢ï¼Œæœç´¢esp8266ä¸‹è½½ã€‚
![](https://nkt-blog-1315787778.cos.ap-nanjing.myqcloud.com/blog/article/202212101614217.webp)

&emsp;&emsp;ç‚¹å‡»å·¥å…·ï¼ŒæŒ‰å›¾ç‰‡æ‰€ç¤ºé€‰æ‹©`ESP-12 Moudle`æˆ–`ESP-12E Moudle` 
![](https://nkt-blog-1315787778.cos.ap-nanjing.myqcloud.com/blog/article/202212102006528.webp)
<!-- endtab -->
<!-- tab å®‰è£…åŒ…ä¸‹è½½ -->
**ç¦»çº¿æ•°æ®åŒ…æ–¹å¼ä¸‹è½½**
&emsp;&emsp;ç¦»çº¿æ•°æ®åŒ…å¯ä»¥å»[Arduinoä¸­æ–‡ç¤¾åŒº](https://www/arduino.cn/thread-1066-1-1.html)ä¸‹è½½,å› ä¸ºæœ¬æ¬¡è¦ç”¨çš„æ˜¯ç‚¹ç¯ç§‘æŠ€çš„app,æ‰€ä»¥æˆ‘ç”¨çš„æ˜¯ç‚¹ç¯ç§‘æŠ€çš„æ•°æ®åŒ…ã€‚[å®˜æ–¹åœ°å€](https://dl.diandeng.tech/s/l5i5)
å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è½½æˆ‘çš„`å¯†ç :ccrm`,ç›´æ¥åŒå‡»å®‰è£…å³å¯ã€‚
{% btns rounded grid5 %}
{% cell æ•°æ®åŒ…,https://wwzq.lanzoue.com/i8poZ0i2yqne, fas fa-download %}
{% endbtns %}

&emsp;&emsp;ç‚¹å‡»å·¥å…·ï¼ŒæŒ‰å›¾ç‰‡æ‰€ç¤ºé€‰æ‹©`ESP-12 Moudle`æˆ–`ESP-12E Moudle` 
![](https://nkt-blog-1315787778.cos.ap-nanjing.myqcloud.com/blog/article/202212102006528.webp)

<!-- endtab -->
{% endtabs %}

### 5.2.3 ä¸‹è½½ç‚¹ç¯ç§‘æŠ€SDK

{% tabs 1%}
<!-- tab å®˜æ–¹åœ°å€ä¸‹è½½-->
**ç‚¹å‡»è¿›å…¥å®˜æ–¹ä¸‹è½½åœ°å€**ï¼Œç‚¹å‡»ä¸‹è½½`Arduino(C++)`
[å®˜æ–¹åœ°å€](https://dl.diandeng.tech/s/l5i5)
ä¸‹è½½åè§£å‹ï¼Œç›´æ¥å¤åˆ¶ç²˜è´´åˆ°Arduinoå®‰è£…ç›®å½•çš„`libraries`æ–‡ä»¶å¤¹ä¸­
<!-- endtab -->
<!-- tab ç›´æ¥ä¸‹è½½æˆ‘çš„ -->
{% btns rounded grid5 %}
{% cell SDK,https://wwzq.lanzoue.com/iuiau0i309pg, fas fa-download %}
{% endbtns %}
ä¸‹è½½åè§£å‹ï¼Œç›´æ¥å¤åˆ¶ç²˜è´´åˆ°Arduinoå®‰è£…ç›®å½•çš„`libraries`æ–‡ä»¶å¤¹ä¸­
<!-- endtab -->
{% endtabs %}
æœ€åå¦‚æœ`æ–‡ä»¶-ç¤ºä¾‹`å¤„å‡ºç°`Blinker`,å³è¯æ˜å·²é…ç½®æˆåŠŸï¼
![](https://nkt-blog-1315787778.cos.ap-nanjing.myqcloud.com/blog/article/202212101509206.webp)

## 5.3 ä¸‹è½½ç‚¹ç¯ç§‘æŠ€app
{% btns rounded grid5 %}
{% cell ç‚¹å‡»ä¸‹è½½,https://wwzq.lanzoue.com/ivcA30i0shmb, fas fa-download %}
{% endbtns %}
`å¯†ç :2o4v`ï¼Œå¯†ç å…³ä¸æ‰ï¼Œæˆ‘ä¹Ÿæœ¨æ»´åŠæ³•ï¼
&emsp;&emsp;ä¸‹è½½å®‰è£…åæ³¨å†Œç™»å½•ï¼Œç‚¹å‡»å³ä¸Šè§’ `+` æ·»åŠ è®¾å¤‡-ç‹¬ç«‹è®¾å¤‡-ç½‘ç»œæ¥å…¥ï¼Œæ­¤æ—¶ä¼šå‡ºå‡ºç°ä¸€ä¸ª`key`å€¼ï¼Œä¿å­˜å¥½è¿™ä¸ªkeyå€¼ï¼Œä¸€ä¼šè¦ç”¨ï¼

# 6ã€è¿çº¿
&emsp;&emsp;ä¹°åˆ°æ‰‹çš„èˆµæœºæ˜¯è‡ªå¸¦ä¸‰æ ¹çº¿çš„ï¼Œåˆ†åˆ«æ˜¯çº¢ã€æ£•ã€æ©™ä¸‰è‰²ï¼Œå°†è‡ªå·±ä¹°åˆ°çš„æœé‚¦çº¿é€‰æ‹©ä¸‰æ ¹é¢œè‰²ä¸€æ ·çš„å¯¹åº”è¿æ¥ï¼Œå¦å¤–ä¸€å¤´åˆ†åˆ«æ’åœ¨ï¼š`çº¢è‰²ï¼š3v3`ã€`æ©™è‰²ï¼šIO0`ã€`æ£•è‰²ï¼šGND`ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
![](https://nkt-blog-1315787778.cos.ap-nanjing.myqcloud.com/blog/article/202212101617913.webp)

# 7ã€ä»£ç çƒ§å½•
&emsp;&emsp;å›åˆ°Arduino IDEï¼Œç‚¹å‡»æ–‡ä»¶-æ–°å»ºï¼Œç²˜è´´ä»¥ä¸‹ä»£ç ã€‚
```
#include <dummy.h>

#define BLINKER_WIFI
#define BLINKER_MIOT_OUTLET
#include <Servo.h>
#include <Blinker.h>


char auth[] = "###";  // ç‚¹ç¯å¯†åŒ™key
char ssid[] = "###";  //wifiåç§°
char pswd[] = "###";   //wifiå¯†ç 



// åˆ›å»ºå¼€å…³
BlinkerButton Button1("btn_k");  //èˆµæœºçš„å¼€
BlinkerButton Button2("btn_g");  //èˆµæœºçš„å…³

//åˆ›å»ºèˆµæœº
Servo myservo;  //å®šä¹‰ï¼ˆåˆ›å»ºï¼‰ä¸€ä¸ªèˆµæœºåç§°ä¸ºmyservo

//åˆ›å»º3ä¸ªæ»‘å—
BlinkerSlider Slider1("ran_max1");  //æ»‘å—1 æ§åˆ¶ç¬¬ä¸€ä¸ªèˆµæœºæœ€å¤§è§’åº¦
BlinkerSlider Slider2("ran_min1");  //æ»‘å—2 æ§åˆ¶ç¬¬ä¸€ä¸ªèˆµæœºæœ€å°è§’åº¦
BlinkerSlider Slider3("ran_mid1");  //æ»‘å—3 æ§åˆ¶ç¬¬ä¸€ä¸ªèˆµæœºä¸­é—´è§’åº¦


//å®šä¹‰3ä¸ªå˜é‡
int ran_max1, ran_min1, ran_mid1;
//å°çˆ±åŒå­¦ä¸“å±ä¸¤ä¸ªå˜é‡
int xa_mid1 = 110;
int xa_max1 = 15;  

//åˆ›å»ºä¸€ä¸ªBoolç±»å‹çš„å˜é‡
bool on_or_off = false;
bool oState = false;

// app ç«¯æŒ‰ä¸‹æŒ‰é”®å³ä¼šæ‰§è¡Œè¯¥å‡½æ•° å›è°ƒå‡½æ•°
void button1_callback(const String& state) {
  BLINKER_LOG("get button state: ", state);  //è¯»å–æŒ‰é”®çŠ¶æ€

  myservo.write(ran_max1);  //å†™å…¥æ»‘å—1 çš„è§’åº¦   è¿™ä¸ªè§’åº¦å¤§å°å¯ä»¥é€šè¿‡æ»‘å—1 æ¥è®¾ç½®
  //Blinker.vibrate();        //ä½¿æ‰‹æœºéœ‡åŠ¨
  Blinker.delay(1000);      //è¿™ä¸ªdelay ä¸€å®šè¦æœ‰ ä¸ç„¶èˆµæœºè½¬ä¸è¿‡æ¥ï¼Œ1000æ¯«ç§’å»¶è¿Ÿ
  myservo.write(ran_mid1);  //1000æ¯«ç§’=1såæ¢å¤åˆ°æ»‘å—3è®¾ç½®çš„è§’åº¦ï¼Œ
  Blinker.vibrate();        //ä½¿æ‰‹æœºéœ‡åŠ¨
}
void button2_callback(const String& state) {
  BLINKER_LOG("get button state: ", state);  //è¿™ä¸ªå’Œä¸Šé¢çš„ä¸€æ ·
  myservo.write(ran_min1);
  Blinker.vibrate();
  Blinker.delay(1000);
  myservo.write(ran_mid1);
  Blinker.vibrate();
}


//å°çˆ±ç”µæºå›è°ƒå‡½æ•°
//é‡Œé¢åŒæ ·è®¾ç½®èˆµæœºçš„åŠ¨ä½œ
void miotPowerState(const String& state) {
  BLINKER_LOG("need set power state: ", state);
  if (state == BLINKER_CMD_ON && ran_mid1 == 0 && ran_max1 == 0) {  //å…ˆåˆ¤æ–­æ˜¯å¦æ»¡è¶³æœ€å¤§è§’åº¦å’Œä¸­é—´è§’åº¦ä¸º0ï¼Œæ»¡è¶³0åº¦åˆ™æ˜¯espé‡å¯åˆå§‹åŒ–äº†ï¼Œé»˜è®¤ä½¿ç”¨æ‰€ç»™çš„å›ºå®šå˜é‡
    myservo.write(xa_max1);
    Blinker.delay(1000);
    myservo.write(xa_mid1);
    BlinkerMIOT.powerState("on");
    BlinkerMIOT.print();
  } else if (state == BLINKER_CMD_ON) {  //ä¸Šé¢æ¡ä»¶ä¸æ»¡è¶³å°±æ˜¯æˆ‘åœ¨ç‚¹ç¯è®¾ç½®äº†è§’åº¦ï¼Œé‡æ–°åˆ¤æ–­æ˜¯å¦ä¸ºå¼€ï¼Œå¹¶æŒ‰ç…§ç‚¹ç¯çš„æ•°æ®æ¥è®¾ç½®
    // digitalWrite(LED_BUILTIN, HIGH);
    myservo.write(ran_max1);  //å†™å…¥æ»‘å—1 çš„è§’åº¦   è¿™ä¸ªè§’åº¦å¤§å°å¯ä»¥é€šè¿‡æ»‘å—1 æ¥è®¾ç½®
    Blinker.delay(1000);      //è¿™ä¸ªdelay ä¸€å®šè¦æœ‰ ä¸ç„¶èˆµæœºè½¬ä¸è¿‡æ¥
    myservo.write(ran_mid1);  //1såæ¢å¤åˆ°æ»‘å—3è®¾ç½®çš„è§’åº¦ï¼Œ
    BlinkerMIOT.powerState("on");
    BlinkerMIOT.print();
  } else if (state == BLINKER_CMD_OFF && ran_mid1 == 0 && ran_max1 == 0) {  //åˆ¤æ–­æ˜¯å¦ä¸ºå…³å¹¶ä¸”ä¸¤ä¸ªè§’åº¦æ˜¯å¦ä¸º0
    myservo.write(ran_min1);
    Blinker.delay(1000);
    myservo.write(xa_mid1);  //ä¸º0å°±ä½¿ç”¨å°çˆ±çš„é»˜è®¤å›ºå®šä¸­é—´è§’åº¦å˜é‡
    BlinkerMIOT.powerState("off");
    BlinkerMIOT.print();
  } else if (state == BLINKER_CMD_OFF) {
    //  digitalWrite(LED_BUILTIN, LOW);
    myservo.write(ran_min1);
    Blinker.delay(1000);
    myservo.write(ran_mid1);
    BlinkerMIOT.powerState("off");
    BlinkerMIOT.print();
  }
}


void miotQuery(int32_t queryCode) {
  BLINKER_LOG("MIOT Query codes: ", queryCode);

  switch (queryCode) {
    case BLINKER_CMD_QUERY_ALL_NUMBER:
      BLINKER_LOG("MIOT Query All");
      BlinkerMIOT.powerState(oState ? "on" : "off");
      BlinkerMIOT.print();
      break;
    case BLINKER_CMD_QUERY_POWERSTATE_NUMBER:
      BLINKER_LOG("MIOT Query Power State");
      BlinkerMIOT.powerState(oState ? "on" : "off");
      BlinkerMIOT.print();
      break;
    default:
      BlinkerMIOT.powerState(oState ? "on" : "off");
      BlinkerMIOT.print();
      break;
  }
}

void dataRead(const String& data) {
  BLINKER_LOG("Blinker readString: ", data);
  Blinker.vibrate();
  uint32_t BlinkerTime = millis();
  Blinker.print(BlinkerTime);
  Blinker.print("millis", BlinkerTime);
}


//æ»‘å—è®¾ç½®
void slider1_callback(int32_t value)  //æœ€å¤§è§’åº¦æ»‘åŠ¨æ¡
{
  ran_max1 = value;
  myservo.write(ran_max1);
  //Blinker.vibrate();  //ä½¿æ‰‹æœºéœ‡åŠ¨
  Blinker.delay(1000);
  BLINKER_LOG("get slider value: ", value);
}

void slider2_callback(int32_t value)  //æœ€å°è§’åº¦æ»‘åŠ¨æ¡
{
  ran_min1 = value;
  myservo.write(ran_min1);
  //Blinker.vibrate();  //ä½¿æ‰‹æœºéœ‡åŠ¨
  Blinker.delay(1000);
  BLINKER_LOG("get slider value: ", value);
}

void slider3_callback(int32_t value)  //ä¸­é—´è§’åº¦æ»‘åŠ¨æ¡
{
  ran_mid1 = value;
  myservo.write(ran_mid1);  //æ‰“å°è¾“å‡ºæ»‘æ¡è§’åº¦è®¾ç½®æ•°æ®
  //Blinker.vibrate();        //ä½¿æ‰‹æœºéœ‡åŠ¨
  Blinker.delay(1000);
  BLINKER_LOG("get slider value: ", value);
}


// åˆå§‹åŒ–ä¸²å£ï¼Œå¹¶å¼€å¯è°ƒè¯•ä¿¡æ¯
void setup() {

  Serial.begin(115200);
  Blinker.begin(auth, ssid, pswd);

  Button1.attach(button1_callback);  //ç»‘å®šæŒ‰é”®æ‰§è¡Œå›è°ƒå‡½æ•°
  Button2.attach(button2_callback);  //ç»‘å®šæŒ‰é”®æ‰§è¡Œå›è°ƒå‡½æ•°


  Slider1.attach(slider1_callback);
  Slider2.attach(slider2_callback);
  Slider3.attach(slider3_callback);

  myservo.attach(0);             //å®šä¹‰èˆµæœºè¿æ¥çš„å¼•è„š
  pinMode(LED_BUILTIN, OUTPUT);  //å®šä¹‰ç¯å¼•è„š

  BlinkerMIOT.attachQuery(miotQuery);  //å°çˆ±åŒå­¦å›è°ƒå‡½æ•°
  Blinker.attachData(dataRead);
  BlinkerMIOT.attachPowerState(miotPowerState);
}

void loop() {

  Blinker.run();                    //*æ¯æ¬¡è¿è¡Œéƒ½ä¼šå°†è®¾å¤‡æ”¶åˆ°çš„æ•°æ®è¿›è¡Œä¸€æ¬¡è§£æã€‚
  //digitalWrite(LED_BUILTIN, HIGH);  //ä¸è¦äº®ç¯æŠŠè¿™ä¸ªåˆ æ‰
  //digitalWrite(LED_BUILTIN, LOW);   //ä¸è¦äº®ç¯æŠŠè¿™ä¸ªåˆ æ‰
}

//blink app ç•Œé¢é…ç½®ä»£ç å¤åˆ¶åˆ°appé‡Œé¢å³å¯
//{Â¨versionÂ¨Â¨2.0.0Â¨Â¨configÂ¨{Â¨headerColorÂ¨Â¨transparentÂ¨Â¨headerStyleÂ¨Â¨darkÂ¨Â¨backgroundÂ¨{Â¨imgÂ¨Â¨assets/img/headerbg.jpgÂ¨Â¨isFullÂ¨Â«}}Â¨dashboardÂ¨|{Â¨typeÂ¨Â¨texÂ¨Â¨t0Â¨Â¨blinkerå…¥é—¨ç¤ºä¾‹Â¨Â¨t1Â¨Â¨æ–‡æœ¬2Â¨Â¨bgÂ¨Ã‹Â¨icoÂ¨Â´Â´Â¨colsÂ¨ÃÂ¨rowsÂ¨ÃŠÂ¨keyÂ¨Â¨tex-272Â¨Â´xÂ´Ã‰Â´yÂ´Ã‰Â¨speechÂ¨|Ã·Â¨lstyleÂ¨ÃŠÂ¨clrÂ¨Â¨#FFFÂ¨}{ÃŸCÂ¨btnÂ¨ÃŸJÂ¨fal fa-power-offÂ¨Â¨modeÂ¨Ã‰ÃŸEÂ¨å…³ç¯Â¨ÃŸGÃŸHÃŸIÃ‰ÃŸKÃ‹ÃŸLÃ‹ÃŸMÂ¨btn_gÂ¨Â´xÂ´ÃÂ´yÂ´ÃÃŸPÃ‰}{ÃŸCÃŸSÃŸJÃŸTÃŸUÃ‰ÃŸEÂ¨å¼€ç¯Â¨ÃŸGÃŸHÃŸIÃ‰ÃŸKÃ‹ÃŸLÃ‹ÃŸMÂ¨btn_kÂ¨Â´xÂ´ÃŠÂ´yÂ´ÃÃŸPÃ‰}{ÃŸCÂ¨ranÂ¨ÃŸEÂ¨æœ€å¤§è§’åº¦Â¨ÃŸQÂ¨#389BEEÂ¨Â¨maxÂ¨Â¢2uÂ¨minÂ¨Ã‰ÃŸIÃ‰ÃŸKÃ‘ÃŸLÃ‹ÃŸMÂ¨ran_max1Â¨Â´xÂ´Ã‰Â´yÂ´Â¤DÃŸPÃ‰}{ÃŸCÃŸZÃŸEÂ¨æœ€å°è§’åº¦Â¨ÃŸQÃŸbÃŸcÂº0ÃŸdÃ‰ÃŸIÃ‰ÃŸKÃ‘ÃŸLÃ‹ÃŸMÂ¨ran_min1Â¨Â´xÂ´Ã‰Â´yÂ´Ã’ÃŸPÃ‰}{ÃŸCÃŸZÃŸEÂ¨ä¸­é—´è§’åº¦Â¨ÃŸQÃŸbÃŸcÂº0ÃŸdÃ‰ÃŸIÃ‰ÃŸKÃ‘ÃŸLÃ‹ÃŸMÂ¨ran_mid1Â¨Â´xÂ´Ã‰Â´yÂ´Â¤BÃŸPÃ‰}{ÃŸCÂ¨debÂ¨ÃŸUÃ‰ÃŸIÃ‰ÃŸKÃ‘ÃŸLÃŒÃŸMÂ¨debugÂ¨Â´xÂ´Ã‰Â´yÂ´ÃŒ}Ã·Â¨actionsÂ¨|Â¦Â¨cmdÂ¨Â¦Â¨switchÂ¨â€¡Â¨textÂ¨â€¡Â¨onÂ¨Â¨æ‰“å¼€?nameÂ¨Â¨offÂ¨Â¨å…³é—­?nameÂ¨â€”Ã·Â¨triggersÂ¨|{Â¨sourceÂ¨ÃŸnÂ¨source_zhÂ¨Â¨å¼€å…³çŠ¶æ€Â¨Â¨stateÂ¨|ÃŸpÃŸrÃ·Â¨state_zhÂ¨|Â¨æ‰“å¼€Â¨Â´å…³é—­Â´Ã·}Ã·Â´rtÂ´|Ã·}
```
&emsp;&emsp;éœ€è¦æ›´æ”¹çš„åœ°æ–¹æœ‰ä¸‰å¤„,ä¸è¦å‡ºç°ä¸­æ–‡
```
char auth[] = "###";   //key
char ssid[] = "###";  //wifiåç§°
char pswd[] = "###";  //wifiå¯†ç 
```
&emsp;&emsp;ç‚¹å‡»çƒ§å½•ï¼Œå†™å…¥ç¨‹åºï¼Œè¿™é‡Œæˆ‘æ²¡æœ‰è¿æ¥å°±ä¸æ”¾å›¾äº†ã€‚

# 8ã€é…ç½®ç‚¹ç¯ç§‘æŠ€app
&emsp;&emsp;é€‰æ‹©åˆšåˆšæ–°å»ºçš„è®¾å¤‡ï¼Œç‚¹å‡»å¼€å§‹ä½¿ç”¨(å¦‚æœä¸æ˜¯ç¬¬ä¸€æ¬¡æ²¡æœ‰è¿™ä¸ª)-å³ä¸Šè§’ä¸‰ä¸ªç‚¹-ç•Œé¢é…ç½®
![](https://nkt-blog-1315787778.cos.ap-nanjing.myqcloud.com/blog/article/202212101618714.webp)

&emsp;&emsp;`ç²˜è´´å¦‚ä¸‹ä»£ç `,ç¡®å®šå³å¯ã€‚
```
{Â¨versionÂ¨Â¨2.0.0Â¨Â¨configÂ¨{Â¨headerColorÂ¨Â¨transparentÂ¨Â¨headerStyleÂ¨Â¨darkÂ¨Â¨backgroundÂ¨{Â¨imgÂ¨Â¨assets/img/headerbg.jpgÂ¨Â¨isFullÂ¨Â«}}Â¨dashboardÂ¨|{Â¨typeÂ¨Â¨texÂ¨Â¨t0Â¨Â¨blinkerå…¥é—¨ç¤ºä¾‹Â¨Â¨t1Â¨Â¨æ–‡æœ¬2Â¨Â¨bgÂ¨Ã‹Â¨icoÂ¨Â´Â´Â¨colsÂ¨ÃÂ¨rowsÂ¨ÃŠÂ¨keyÂ¨Â¨tex-272Â¨Â´xÂ´Ã‰Â´yÂ´Ã‰Â¨speechÂ¨|Ã·Â¨lstyleÂ¨ÃŠÂ¨clrÂ¨Â¨#FFFÂ¨}{ÃŸCÂ¨btnÂ¨ÃŸJÂ¨fal fa-power-offÂ¨Â¨modeÂ¨Ã‰ÃŸEÂ¨å…³ç¯Â¨ÃŸGÃŸHÃŸIÃ‰ÃŸKÃ‹ÃŸLÃ‹ÃŸMÂ¨btn_gÂ¨Â´xÂ´ÃÂ´yÂ´ÃÃŸPÃ‰}{ÃŸCÃŸSÃŸJÃŸTÃŸUÃ‰ÃŸEÂ¨å¼€ç¯Â¨ÃŸGÃŸHÃŸIÃ‰ÃŸKÃ‹ÃŸLÃ‹ÃŸMÂ¨btn_kÂ¨Â´xÂ´ÃŠÂ´yÂ´ÃÃŸPÃ‰}{ÃŸCÂ¨ranÂ¨ÃŸEÂ¨æœ€å¤§è§’åº¦Â¨ÃŸQÂ¨#389BEEÂ¨Â¨maxÂ¨Â¢2uÂ¨minÂ¨Ã‰ÃŸIÃ‰ÃŸKÃ‘ÃŸLÃ‹ÃŸMÂ¨ran_max1Â¨Â´xÂ´Ã‰Â´yÂ´Â¤DÃŸPÃ‰}{ÃŸCÃŸZÃŸEÂ¨æœ€å°è§’åº¦Â¨ÃŸQÃŸbÃŸcÂº0ÃŸdÃ‰ÃŸIÃ‰ÃŸKÃ‘ÃŸLÃ‹ÃŸMÂ¨ran_min1Â¨Â´xÂ´Ã‰Â´yÂ´Ã’ÃŸPÃ‰}{ÃŸCÃŸZÃŸEÂ¨ä¸­é—´è§’åº¦Â¨ÃŸQÃŸbÃŸcÂº0ÃŸdÃ‰ÃŸIÃ‰ÃŸKÃ‘ÃŸLÃ‹ÃŸMÂ¨ran_mid1Â¨Â´xÂ´Ã‰Â´yÂ´Â¤BÃŸPÃ‰}{ÃŸCÂ¨debÂ¨ÃŸUÃ‰ÃŸIÃ‰ÃŸKÃ‘ÃŸLÃŒÃŸMÂ¨debugÂ¨Â´xÂ´Ã‰Â´yÂ´ÃŒ}Ã·Â¨actionsÂ¨|Â¦Â¨cmdÂ¨Â¦Â¨switchÂ¨â€¡Â¨textÂ¨â€¡Â¨onÂ¨Â¨æ‰“å¼€?nameÂ¨Â¨offÂ¨Â¨å…³é—­?nameÂ¨â€”Ã·Â¨triggersÂ¨|{Â¨sourceÂ¨ÃŸnÂ¨source_zhÂ¨Â¨å¼€å…³çŠ¶æ€Â¨Â¨stateÂ¨|ÃŸpÃŸrÃ·Â¨state_zhÂ¨|Â¨æ‰“å¼€Â¨Â´å…³é—­Â´Ã·}Ã·Â´rtÂ´|Ã·}
```
&emsp;&emsp;æ­¤æ—¶ä½ ä¼šå‘ç°å·²ç»æœ‰æŒ‰é’®äº†ï¼ŒæŒ‰é’®è§’åº¦å‚æ•°æ ¹æ®è‡ªå·±å®é™…æƒ…å†µè°ƒæ•´ï¼Œå¦‚æœä¸ä¹ æƒ¯è¿™ä¸ªç•Œé¢ï¼Œå¯è‡ªè¡Œåˆ›å»ºï¼
# 9ã€å°çˆ±åŒå­¦é…ç½®
&emsp;&emsp;å¤šæ•°æ‰‹æœºé¢‘é¢‘å‡å¯ä¸‹è½½å°çˆ±åŒå­¦app,å®æµ‹æ—¶æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºæˆ‘çš„ç›®å‰çš„æ‰‹æœºä¸æ˜¯å°ç±³çš„ï¼Œä¹Ÿä¸å–œæ¬¢ç”¨å°çˆ±è¯­éŸ³æ§åˆ¶ï¼Œå°±å¸è½½äº†å°çˆ±åŒå­¦ï¼Œè¿™é‡Œå°±ä¸æ”¾å›¾ä»‹ç»äº†ï¼Œç®€å•æ¥è¯´ç»‘å®šç¬¬ä¸‰æ–¹ç‚¹ç¯ç§‘æŠ€åå¯¼å…¥å³å¯ã€‚
<p style="font-size:25px;">{% span red, åˆ°è¿™é‡Œï¼Œé‚£ä¹ˆæ­å–œå•¦ï¼Œå·æ‡’å°èƒ½æ‰‹åŠŸæ³•åˆç²¾è¿›å•¦ï¼ğŸ‘» %}</p>
![](https://s2.loli.net/2022/11/24/siMAqL1Zewz3QlJ.webp)